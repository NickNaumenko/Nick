const list=document.querySelector(".works__list"),children=list.children,childrenCount=children.length,slider=document.querySelector(".slider"),buttonPrev=document.querySelector(".slider__prev"),buttonNext=document.querySelector(".slider__next");function Slider(t){this._slider=document.querySelector(t),this._frame=this._slider.querySelector(".slider__frame"),this._slides=this._slider.querySelectorAll(".slider__item"),this._prev=this._slider.querySelector(".slider__prev"),this._next=this._slider.querySelector(".slider__next"),this._position=0}Slider.prototype.moveSlide=function(t){let e=this._frame.getBoundingClientRect().left;this._position=Math.round(e/580);let i=580*this._position-e,o=Math.abs((580*this._position-e)/600);580*this._position<=-1740&&(t.style.transitionDuration="0s",console.log(this._frame.style),console.log(this._position),this._position=Math.round(t.getBoundingClientRect().left/580),t.style.transform=`translateX(${0-i}px)`,this._position=0),setTimeout(()=>{t.style.transitionDuration=`${o}s`,t.style.transform=`translateX(${580*this._position}px)`},4),setTimeout(()=>{this._frame.style.transitionDuration=""},1100)},Slider.prototype.drag=function(t,e){const i=this;let o={};function n(t){if(!o.elem)return;window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();let i=r(t,e[3])-o.downX;var n,s;Math.abs(i)<3||(o.position=r(t,e[3])-o.downX+o.startPosition,n=o.elem,s=o.position,console.log(s),n.style.transform=`matrix(1,0,0,1,${s},0)`)}function s(t){document.removeEventListener(e[1],n),document.removeEventListener(e[2],s),i.moveSlide(o.elem),o={}}function r(t){return t instanceof MouseEvent?t.pageX:t instanceof TouchEvent?t.changedTouches[0].pageX:void 0}t.addEventListener(e[0],function(t){if(t.which&&1!=t.which)return;let i=t.target.closest(".slider__frame");i&&(o.elem=i,o.startPosition=o.elem.getBoundingClientRect().left,o.downX=r(t,e[3]),o.elem.ondragstart=function(){return!1},document.addEventListener(e[1],n),document.addEventListener(e[2],s))})};const s=new Slider(".slider");function initList(){let t=document.createDocumentFragment();for(i=0;i<3;i++){let e=children[i].cloneNode(!0);t.appendChild(e)}for(list.insertBefore(t,children[0]),i=0;i<3;i++){let t=children[i].cloneNode(!0);list.appendChild(t)}for(let t=-3;t<children.length-3;t++)children[t+3].style.position="absolute",children[t+3].style.left=`${580*t}px`}s.drag(s._frame,["mousedown","mousemove","mouseup"]),s.drag(s._frame,["touchstart","touchmove","touchend"]),initList();let path=0;function showNext(){this._position++,list.style.transitionDuration="1s",list.style.transform=`matrix(1,0,0,1,${580*this._position},0)`}function showPrev(){this._position--,list.style.transitionDuration="1s",list.style.transform=`matrix(1,0,0,1,${580*this._position},0)`}list.onwheel=function(t){let e=t.deltaY||t.detail||t.wheelDelta;var i,o;console.log(e),path+=e<0?300:-300,list.style.transitionDuration="1s",i=list,o=path,console.log(o),i.style.transform=`matrix(1,0,0,1,${o},0)`,setTimeout(function(){s.moveSlide(list)},1e3),t.preventDefault()};